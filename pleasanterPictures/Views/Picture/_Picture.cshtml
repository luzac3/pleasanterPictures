@using pleasanterPictures.Models.ViewModel
@model PictureViewModel

@{
    @if (Model.PictureEntity != null)
    {
        <p>番号：@(Model.PictureEntity?.ResultId)</p>
        <input id="picture_id" type="text" class="nodisplay" value="@(Model.PictureEntity?.ResultId)" />
        <p>@(Model.PictureEntity?.Picture)</p>

        @if (!string.IsNullOrEmpty(Model.PictureEntity?.PictureImageOverlay))
        {
            <div class="picture_canvas_wrapper">
                <div class="picture_canvas_container" style="width: auto; display: inline-block; position: relative;">
                    <img 
                        id="picture_image_overlay" 
                        src="@Url.Action("GetImage", "Picture", new { resultId = Model.PictureEntity?.ResultId, type = "overlay" })"
                        class="picture_image_overlay"
                        data-width="@(Model.PictureEntity?.PictureImageOverlayWidth)"
                        data-height="@(Model.PictureEntity?.PictureImageOverlayHeight)"
                        style="max-width: 100%; height: auto; display: block;"
                        loading="lazy"
                    />
                    <canvas 
                        id="picture_canvas_overlay" 
                        class="picture_canvas_overlay"
                        style="position: absolute; top: 0; left: 0; cursor: crosshair;"
                    ></canvas>
                </div>
            </div>
        }
        else if (!string.IsNullOrEmpty(Model.PictureEntity?.PictureImage))
        {
            <div class="picture_canvas_wrapper">
                <div class="picture_canvas_container" style="width: auto; display: inline-block; position: relative;">
                    <img 
                        id="picture_image_overlay" 
                        src="@Url.Action("GetImage", "Picture", new { resultId = Model.PictureEntity?.ResultId, type = "main" })"
                        class="picture_image_overlay"
                        style="max-width: 100%; height: auto; display: block;"
                        loading="lazy"
                    />
                    <canvas 
                        id="picture_canvas_overlay" 
                        class="picture_canvas_overlay"
                        style="position: absolute; top: 0; left: 0; cursor: crosshair;"
                    ></canvas>
                </div>
            </div>
        }
    }
}